<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>ObjectHandles.as</title>
<link rel="stylesheet" type="text/css" href="../../../../SourceStyles.css"/>
</head>

<body><pre><span class="ActionScriptASDoc">/**
 *  Latest information on this project can be found at http://www.rogue-development.com/objectHandles.xml
 * 
 *  Copyright (c) 2007 Marc Hughes 
 * 
 *  Permission is hereby granted, free of charge, to any person obtaining a 
 *  copy of this software and associated documentation files (the &quot;Software&quot;), 
 *  to deal in the Software without restriction, including without limitation 
 *  the rights to use, copy, modify, merge, publish, distribute, sublicense, 
 *  and/or sell copies of the Software, and to permit persons to whom the Software 
 *  is furnished to do so, subject to the following conditions:
 * 
 *  The above copyright notice and this permission notice shall be included in all 
 *  copies or substantial portions of the Software.
 * 
 *  THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, 
 *  INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A 
 *  PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT 
 *  HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION 
 *  OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE 
 *  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. 
 * 
 * -------------------------------------------------------------------------------------------
 *  
 * Contributions by:
 *    Alexander Kludt
 *    Thomas Jakobi
 *       Mario Ernst
 *    Aaron Winkler
 * 
 * -------------------------------------------------------------------------------------------
 * 
 * Description:
 *    ObjectHandles gives the user the ability to move and resize a component with the mouse.
 * 
 * 
 * 
 **/</span>
 
 
 <span class="ActionScriptpackage">package</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">roguedevelopment</span>.<span class="ActionScriptDefault_Text">objecthandles</span>
 <span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">display</span>.<span class="ActionScriptDefault_Text">BitmapData</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">display</span>.<span class="ActionScriptDefault_Text">DisplayObject</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">events</span>.<span class="ActionScriptDefault_Text">Event</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">events</span>.<span class="ActionScriptDefault_Text">FocusEvent</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">events</span>.<span class="ActionScriptDefault_Text">KeyboardEvent</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">events</span>.<span class="ActionScriptDefault_Text">MouseEvent</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">geom</span>.<span class="ActionScriptDefault_Text">Matrix</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">geom</span>.<span class="ActionScriptDefault_Text">Point</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">ui</span>.<span class="ActionScriptDefault_Text">Keyboard</span>;
    
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">containers</span>.<span class="ActionScriptDefault_Text">Canvas</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">core</span>.<span class="ActionScriptDefault_Text">ScrollPolicy</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">core</span>.<span class="ActionScriptDefault_Text">UIComponent</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">effects</span>.<span class="ActionScriptDefault_Text">Rotate</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">events</span>.<span class="ActionScriptDefault_Text">FlexEvent</span>;

    <span class="ActionScriptASDoc">/** 
     * The main component in the ObjectHandle package that provides most of the functionality.
     **/</span>
    <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">name</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;objectRotatedEvent&quot;</span>, <span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;com.roguedevelopment.objecthandles.ObjectHandleEvent&quot;</span><span class="ActionScriptBracket/Brace">)]</span>
    <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">name</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;objectRotatingEvent&quot;</span>, <span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;com.roguedevelopment.objecthandles.ObjectHandleEvent&quot;</span><span class="ActionScriptBracket/Brace">)]</span>
    <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">name</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;objectMovedEvent&quot;</span>, <span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;com.roguedevelopment.objecthandles.ObjectHandleEvent&quot;</span><span class="ActionScriptBracket/Brace">)]</span>
    <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">name</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;objectResizedEvent&quot;</span>, <span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;com.roguedevelopment.objecthandles.ObjectHandleEvent&quot;</span><span class="ActionScriptBracket/Brace">)]</span>
    <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">name</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;objectSelected&quot;</span>, <span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;com.roguedevelopment.objecthandles.ObjectHandleEvent&quot;</span><span class="ActionScriptBracket/Brace">)]</span>
    <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">name</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;objectDeselected&quot;</span>, <span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;com.roguedevelopment.objecthandles.ObjectHandleEvent&quot;</span><span class="ActionScriptBracket/Brace">)]</span>
    <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">name</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;objectMovingEvent&quot;</span>, <span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;com.roguedevelopment.objecthandles.ObjectHandleEvent&quot;</span><span class="ActionScriptBracket/Brace">)]</span>
    <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">name</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;objectResizingEvent&quot;</span>, <span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;com.roguedevelopment.objecthandles.ObjectHandleEvent&quot;</span><span class="ActionScriptBracket/Brace">)]</span>    
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">ObjectHandles</span> <span class="ActionScriptReserved">extends</span> <span class="ActionScriptDefault_Text">Canvas</span> <span class="ActionScriptReserved">implements</span> <span class="ActionScriptDefault_Text">Selectable</span>
    <span class="ActionScriptBracket/Brace">{</span>                    
        
        <span class="ActionScriptASDoc">/** 
         * Is the user allowed to vertically resize the component?
         **/</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Inspectable</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">defaultValue</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)]</span>        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">allowVResize</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
        
        
        <span class="ActionScriptASDoc">/**
        * When contained within an ObjectHandlesCanvas, the items will be sorted by this in the display list order
        * which affects their z ordering.
        * 
        * It&apos;s ok to have duplicate sortOrder properties, think of it more like a &quot;level&quot; than a strict order.
        **/</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sortOrder</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;
        
        <span class="ActionScriptASDoc">/** 
         * Is the user allowed to rotate the component?
         **/</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Inspectable</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">defaultValue</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)]</span>        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">allowRotate</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;

       <span class="ActionScriptASDoc">/**
        * When rotating, should the component be rotated by centerpoint?
        **/</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Inspectable</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">defaultValue</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)]</span>        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">rotateFromCenter</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                
        <span class="ActionScriptASDoc">/** 
         * Is the user allowed to horizontally resize the component?
         **/</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Inspectable</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">defaultValue</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)]</span>        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">allowHResize</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
        
        <span class="ActionScriptASDoc">/**
        * When moving or resizing, and the object is on an ObjectHandlesCanvas, should it be brought to the foreground during the operation?
        **/</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Inspectable</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">defaultValue</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)]</span>        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">autoBringForward</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
        
        
        <span class="ActionScriptASDoc">/**
        * For partially transparent objects, set this to true and a hit-detection based on the bitmap image of the
        * object will take place instead of just detecting clicks within the bounding box.  This is more CPU intensive so
        * only use it if you need to.
        **/</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Inspectable</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">defaultValue</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)]</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">pixelExactClick</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">listenAllLayers</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>; <span class="ActionScriptComment">// I need to understand this more, why would we ever want it false?
</span>        
        
        
        <span class="ActionScriptASDoc">/**
        * An embedded image to use for the resize handles.
        * If you leave this null it will be programatically drawn.
        **/</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Inspectable</span><span class="ActionScriptBracket/Brace">]</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">source</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;resizeHandle.png&quot;</span><span class="ActionScriptBracket/Brace">)]</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">resizeHandleImage</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Class</span> ;
        
        <span class="ActionScriptASDoc">/**
        * An embedded image to use for the rotate handles.
        * If you leave this null it will be programatically drawn.
        **/</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Inspectable</span><span class="ActionScriptBracket/Brace">]</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">source</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;rotateHandle.png&quot;</span><span class="ActionScriptBracket/Brace">)]</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">rotateHandleImage</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Class</span> ;

        
        <span class="ActionScriptASDoc">/**
        * When resizing, should the component always maintain aspect ratio?
        **/</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Inspectable</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">defaultValue</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)]</span>        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">alwaysMaintainAspectRatio</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
        
        <span class="ActionScriptASDoc">/**
        * When resizing, should the component maintain aspect ratio when a corner is dragged?
        **/</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Inspectable</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">defaultValue</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)]</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">cornerMaintainAspectRatio</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;        
        
        <span class="ActionScriptASDoc">/** 
        * Is the component allowed to be moved vertically?
        **/</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Inspectable</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">defaultValue</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)]</span>        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">allowVMove</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
        
        <span class="ActionScriptASDoc">/** 
        * Is the component allowed to be moved horizontally?
        **/</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Inspectable</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">defaultValue</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)]</span>        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">allowHMove</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
        
        <span class="ActionScriptASDoc">/**
        * &quot;anchors&quot; the component to an X coordinate.
        * The component will be allowed to move left and right and resized horizontally, 
        * but some part of it must always cross the given X coordinate.
        * 
        * A value of -1 will cause this parameter to be ignored.
        **/</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Inspectable</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">default</span><span class="ActionScriptOperator">=-</span>1<span class="ActionScriptBracket/Brace">)]</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">xAnchor</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptOperator">-</span>1;

        <span class="ActionScriptASDoc">/**
        * &quot;anchors&quot; the component to Y coordinate.
        * The component will be allowed to move up and down and resized vertically, 
        * but some part of it must always cross the given Y coordinate.
        * 
        * A value of -1 will cause this parameter to be ignored.
        **/</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Inspectable</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">default</span><span class="ActionScriptOperator">=-</span>1<span class="ActionScriptBracket/Brace">)]</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">yAnchor</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptOperator">-</span>1;
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">originalDepth</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>;
        ﻿<span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">aspectRatio</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;
        
        <span class="ActionScriptASDoc">/**
        * Static method so we only have a single cursor object in memory.
        **/</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">defaultCursors</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">OHMouseCursors</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ObjectHandlesMouseCursors2</span><span class="ActionScriptBracket/Brace">()</span>;
        
        <span class="ActionScriptASDoc">/** 
        * The mouse cursors to use.
        * 
        * To change the default mouse cursors, subclass ObjectHandlesMouseCursors and assign it here.
        **/</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mouseCursors</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">OHMouseCursors</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">defaultCursors</span>;
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wasMoved</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wasResized</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wasRotated</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;            

        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">handles</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>;
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isRotating</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isResizingDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isResizingRight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isResizingLeft</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isResizingUp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isMoving</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
        
        ﻿<span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isCorner</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">localClickPoint</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">localClickRotation</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">localClickAngle</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">originalPosition</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">originalSize</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">()</span>;        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">originalRotation</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">currentCursor</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MouseCursorDetails</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">currentCursorId</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptOperator">-</span>1;
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_allowKeyboardManipulation</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">allowKeyboardManipulation</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptDefault_Text">_allowKeyboardManipulation</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">val</span>; <span class="ActionScriptDefault_Text">setupKeyboardListeners</span><span class="ActionScriptBracket/Brace">()</span>; <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">allowKeyboardManipulation</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_allowKeyboardManipulation</span> ; <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">rotateEffect</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Rotate</span>;
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">ObjectHandles</span><span class="ActionScriptBracket/Brace">()</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">super</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">focusEnabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            
            <span class="ActionScriptDefault_Text">creationPolicy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;all&quot;</span>;
            <span class="ActionScriptDefault_Text">mouseChildren</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptDefault_Text">mouseEnabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptDefault_Text">buttonMode</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">FlexEvent</span>.<span class="ActionScriptDefault_Text">CREATION_COMPLETE</span>, <span class="ActionScriptDefault_Text">init</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">Event</span>.<span class="ActionScriptDefault_Text">ADDED_TO_STAGE</span>, <span class="ActionScriptDefault_Text">addedToStage</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">Event</span>.<span class="ActionScriptDefault_Text">REMOVED_FROM_STAGE</span>, <span class="ActionScriptDefault_Text">removedFromStage</span> <span class="ActionScriptBracket/Brace">)</span>;                        
            <span class="ActionScriptDefault_Text">horizontalScrollPolicy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ScrollPolicy</span>.<span class="ActionScriptDefault_Text">OFF</span>;
            <span class="ActionScriptDefault_Text">verticalScrollPolicy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ScrollPolicy</span>.<span class="ActionScriptDefault_Text">OFF</span>;            
            <span class="ActionScriptDefault_Text">clipContent</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addedToStage</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">SelectionManager</span>.<span class="ActionScriptDefault_Text">instance</span>.<span class="ActionScriptDefault_Text">addSelectable</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">removedFromStage</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">SelectionManager</span>.<span class="ActionScriptDefault_Text">instance</span>.<span class="ActionScriptDefault_Text">removeSelectable</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>

        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">init</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">FlexEvent</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            
<span class="ActionScriptComment">//            if (clipContent) {
</span><span class="ActionScriptComment">//                clipContent = resizeHandleImage == null;            
</span><span class="ActionScriptComment">//            }            
</span>                        
            
            <span class="ActionScriptDefault_Text">handles</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">createHandles</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">rotateEffect</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Rotate</span><span class="ActionScriptBracket/Brace">()</span>;
                        
            <span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">MouseEvent</span>.<span class="ActionScriptDefault_Text">MOUSE_DOWN</span>, <span class="ActionScriptDefault_Text">onMouseDown</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">MouseEvent</span>.<span class="ActionScriptDefault_Text">MOUSE_UP</span>, <span class="ActionScriptDefault_Text">onMouseUp</span> <span class="ActionScriptBracket/Brace">)</span>;        
            
            <span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">MouseEvent</span>.<span class="ActionScriptDefault_Text">MOUSE_OVER</span>, <span class="ActionScriptDefault_Text">onMouseOver</span> <span class="ActionScriptBracket/Brace">)</span>;            
            <span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">MouseEvent</span>.<span class="ActionScriptDefault_Text">MOUSE_OUT</span>, <span class="ActionScriptDefault_Text">onMouseOut</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            
            <span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">MouseEvent</span>.<span class="ActionScriptDefault_Text">MOUSE_MOVE</span>, <span class="ActionScriptDefault_Text">onMouseMove</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">SelectionManager</span>.<span class="ActionScriptDefault_Text">instance</span>.<span class="ActionScriptDefault_Text">addSelectable</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">setupKeyboardListeners</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">setupKeyboardListeners</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">_allowKeyboardManipulation</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">KeyboardEvent</span>.<span class="ActionScriptDefault_Text">KEY_DOWN</span>, <span class="ActionScriptDefault_Text">onKeyDown</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">FocusEvent</span>.<span class="ActionScriptDefault_Text">KEY_FOCUS_CHANGE</span>, <span class="ActionScriptDefault_Text">onKeyFocus</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">else</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">removeEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">KeyboardEvent</span>.<span class="ActionScriptDefault_Text">KEY_DOWN</span>, <span class="ActionScriptDefault_Text">onKeyDown</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">removeEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">FocusEvent</span>.<span class="ActionScriptDefault_Text">KEY_FOCUS_CHANGE</span>, <span class="ActionScriptDefault_Text">onKeyFocus</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onKeyFocus</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">FocusEvent</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">parent</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">ObjectHandlesCanvas</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">ohc</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ObjectHandlesCanvas</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parent</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ObjectHandlesCanvas</span>;
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">shiftKey</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">ohc</span>.<span class="ActionScriptDefault_Text">retreatFocus</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">preventDefault</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">else</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">ohc</span>.<span class="ActionScriptDefault_Text">advanceFocus</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">preventDefault</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                
            <span class="ActionScriptBracket/Brace">}</span>
            
            
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onKeyDown</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">KeyboardEvent</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">switch</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">keyCode</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">case</span> <span class="ActionScriptDefault_Text">Keyboard</span>.<span class="ActionScriptDefault_Text">UP</span><span class="ActionScriptOperator">:</span>   <span class="ActionScriptDefault_Text">handleUpPress</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">shiftKey</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptReserved">break</span>;
                <span class="ActionScriptReserved">case</span> <span class="ActionScriptDefault_Text">Keyboard</span>.<span class="ActionScriptDefault_Text">DOWN</span><span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">handleDownPress</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">shiftKey</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptReserved">break</span>;
                <span class="ActionScriptReserved">case</span> <span class="ActionScriptDefault_Text">Keyboard</span>.<span class="ActionScriptDefault_Text">LEFT</span><span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">handleLeftPress</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">shiftKey</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptReserved">break</span>;
                <span class="ActionScriptReserved">case</span> <span class="ActionScriptDefault_Text">Keyboard</span>.<span class="ActionScriptDefault_Text">RIGHT</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">handleRightPress</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">shiftKey</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptReserved">break</span>;
                <span class="ActionScriptComment">//case Keyboard.TAB:  handleTabPress(event); break;
</span>                <span class="ActionScriptReserved">case</span> <span class="ActionScriptDefault_Text">Keyboard</span>.<span class="ActionScriptDefault_Text">SPACE</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">handleSpace</span><span class="ActionScriptBracket/Brace">()</span>; <span class="ActionScriptReserved">break</span>;
                
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">handleSpace</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">SelectionManager</span>.<span class="ActionScriptDefault_Text">instance</span>.<span class="ActionScriptDefault_Text">setSelected</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">handleUpPress</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">shiftKeyDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span> 
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">size</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">width</span>,<span class="ActionScriptDefault_Text">height</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">pos</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span>, <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">shiftKeyDown</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">size</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">--</span>;                
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">else</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">pos</span>.<span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">--</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">applyConstraints</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">pos</span> , <span class="ActionScriptDefault_Text">size</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">pos</span>.<span class="ActionScriptDefault_Text">y</span>;
            <span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">pos</span>.<span class="ActionScriptDefault_Text">x</span>;
            <span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">size</span>.<span class="ActionScriptDefault_Text">x</span>;
            <span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">size</span>.<span class="ActionScriptDefault_Text">y</span>;
            <span class="ActionScriptDefault_Text">dispatchMoved</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">dispatchResized</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">handleDownPress</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">shiftKeyDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span> 
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">size</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">width</span>,<span class="ActionScriptDefault_Text">height</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">pos</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span>, <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">shiftKeyDown</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">size</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">++</span>;                
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">else</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">pos</span>.<span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">++</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">applyConstraints</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">pos</span> , <span class="ActionScriptDefault_Text">size</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">pos</span>.<span class="ActionScriptDefault_Text">y</span>;
            <span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">pos</span>.<span class="ActionScriptDefault_Text">x</span>;
            <span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">size</span>.<span class="ActionScriptDefault_Text">x</span>;
            <span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">size</span>.<span class="ActionScriptDefault_Text">y</span>;    
            <span class="ActionScriptDefault_Text">dispatchMoved</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">dispatchResized</span><span class="ActionScriptBracket/Brace">()</span>;
                
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">handleLeftPress</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">shiftKeyDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span> 
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">size</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">width</span>,<span class="ActionScriptDefault_Text">height</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">pos</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span>, <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">shiftKeyDown</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">size</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">--</span>;                
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">else</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">pos</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">--</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">applyConstraints</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">pos</span> , <span class="ActionScriptDefault_Text">size</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">pos</span>.<span class="ActionScriptDefault_Text">y</span>;
            <span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">pos</span>.<span class="ActionScriptDefault_Text">x</span>;
            <span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">size</span>.<span class="ActionScriptDefault_Text">x</span>;
            <span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">size</span>.<span class="ActionScriptDefault_Text">y</span>;        
            <span class="ActionScriptDefault_Text">dispatchMoved</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">dispatchResized</span><span class="ActionScriptBracket/Brace">()</span>;
                
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">handleRightPress</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">shiftKeyDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span> 
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">size</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">width</span>,<span class="ActionScriptDefault_Text">height</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">pos</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span>, <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">shiftKeyDown</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">size</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">++</span>;                
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">else</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">pos</span>.<span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">++</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">applyConstraints</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">pos</span> , <span class="ActionScriptDefault_Text">size</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">pos</span>.<span class="ActionScriptDefault_Text">y</span>;
            <span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">pos</span>.<span class="ActionScriptDefault_Text">x</span>;
            <span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">size</span>.<span class="ActionScriptDefault_Text">x</span>;
            <span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">size</span>.<span class="ActionScriptDefault_Text">y</span>;    
            <span class="ActionScriptDefault_Text">dispatchMoved</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">dispatchResized</span><span class="ActionScriptBracket/Brace">()</span>;
                    
        <span class="ActionScriptBracket/Brace">}</span>
        
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">switchToLocalMouseListener</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">stage</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">stage</span>.<span class="ActionScriptDefault_Text">removeEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">MouseEvent</span>.<span class="ActionScriptDefault_Text">MOUSE_MOVE</span>, <span class="ActionScriptDefault_Text">onMouseMove</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">MouseEvent</span>.<span class="ActionScriptDefault_Text">MOUSE_MOVE</span>, <span class="ActionScriptDefault_Text">onMouseMove</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">switchToGlobalMouseListener</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">stage</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">MouseEvent</span>.<span class="ActionScriptDefault_Text">MOUSE_MOVE</span>, <span class="ActionScriptDefault_Text">onMouseMove</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">removeEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">MouseEvent</span>.<span class="ActionScriptDefault_Text">MOUSE_MOVE</span>, <span class="ActionScriptDefault_Text">onMouseMove</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onMouseOver</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">buttonDown</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">setMouseCursor</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageX</span>, <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageY</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">setMouseCursor</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">mouseCursors</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptReserved">return</span>;<span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">parent</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptReserved">return</span>;<span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">c</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MouseCursorDetails</span>;
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">handle</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Handle</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">handles</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">handle</span>.<span class="ActionScriptDefault_Text">hitTestPoint</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">x</span>,<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>                    
                    <span class="ActionScriptDefault_Text">c</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mouseCursors</span>.<span class="ActionScriptDefault_Text">getCursor</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">handle</span>.<span class="ActionScriptDefault_Text">getCursorName</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span>;                                        
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">c</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">currentCursor</span> <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">currentCursor</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">c</span>;
                        <span class="ActionScriptDefault_Text">cursorManager</span>.<span class="ActionScriptDefault_Text">removeCursor</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentCursorId</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">currentCursorId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">cursorManager</span>.<span class="ActionScriptDefault_Text">setCursor</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">c</span>.<span class="ActionScriptDefault_Text">cursor</span>,2, <span class="ActionScriptDefault_Text">c</span>.<span class="ActionScriptDefault_Text">offset</span>.<span class="ActionScriptDefault_Text">x</span>, <span class="ActionScriptDefault_Text">c</span>.<span class="ActionScriptDefault_Text">offset</span>.<span class="ActionScriptDefault_Text">y</span>     <span class="ActionScriptBracket/Brace">)</span>;
                                                
                    <span class="ActionScriptBracket/Brace">}</span>                    
                    <span class="ActionScriptReserved">return</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">hitTestPoint</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span>,<span class="ActionScriptDefault_Text">y</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">c</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mouseCursors</span>.<span class="ActionScriptDefault_Text">getCursor</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;SizeAll&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">currentCursor</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">c</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">currentCursor</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">c</span>;
                    <span class="ActionScriptDefault_Text">cursorManager</span>.<span class="ActionScriptDefault_Text">removeCursor</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentCursorId</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">currentCursorId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">cursorManager</span>.<span class="ActionScriptDefault_Text">setCursor</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">c</span>.<span class="ActionScriptDefault_Text">cursor</span>,2, <span class="ActionScriptDefault_Text">c</span>.<span class="ActionScriptDefault_Text">offset</span>.<span class="ActionScriptDefault_Text">x</span>, <span class="ActionScriptDefault_Text">c</span>.<span class="ActionScriptDefault_Text">offset</span>.<span class="ActionScriptDefault_Text">y</span>     <span class="ActionScriptBracket/Brace">)</span>;                        
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">return</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptDefault_Text">currentCursor</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
            <span class="ActionScriptDefault_Text">cursorManager</span>.<span class="ActionScriptDefault_Text">removeCursor</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentCursorId</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onMouseOut</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">buttonDown</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">currentCursor</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
                <span class="ActionScriptDefault_Text">cursorManager</span>.<span class="ActionScriptDefault_Text">removeCursor</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentCursorId</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onMouseUp</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wasRotated</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">dispatchRotated</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wasResized</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">dispatchResized</span><span class="ActionScriptBracket/Brace">()</span>;                
            <span class="ActionScriptBracket/Brace">}</span>            
            <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">wasMoved</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">dispatchMoved</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            
            
            <span class="ActionScriptDefault_Text">isResizingDown</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptDefault_Text">isResizingRight</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;        
            <span class="ActionScriptDefault_Text">isResizingLeft</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptDefault_Text">isResizingUp</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptDefault_Text">isRotating</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptDefault_Text">isMoving</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptDefault_Text">wasMoved</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>
            <span class="ActionScriptDefault_Text">wasResized</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptDefault_Text">wasRotated</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">stage</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">stage</span>.<span class="ActionScriptDefault_Text">removeEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">MouseEvent</span>.<span class="ActionScriptDefault_Text">MOUSE_UP</span>, <span class="ActionScriptDefault_Text">onMouseUp</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">switchToLocalMouseListener</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptComment">//setMouseCursor( stage.mouseX, stage.mouseX );
</span>            <span class="ActionScriptDefault_Text">setMouseCursor</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageX</span>, <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageY</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">resetZOrder</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">bringUp</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span> <span class="ActionScriptDefault_Text">autoBringForward</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptReserved">return</span>; <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">parent</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">ObjectHandlesCanvas</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">try</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">originalDepth</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parent</span>.<span class="ActionScriptDefault_Text">getChildIndex</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;Original: &quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">originalDepth</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">originalDepth</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">parent</span>.<span class="ActionScriptDefault_Text">numChildren</span> <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">parent</span>.<span class="ActionScriptDefault_Text">setChildIndex</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span>, <span class="ActionScriptDefault_Text">parent</span>.<span class="ActionScriptDefault_Text">numChildren</span> <span class="ActionScriptOperator">-</span>1 <span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;numchildren: &quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">parent</span>.<span class="ActionScriptDefault_Text">numChildren</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot; &quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">parent</span>.<span class="ActionScriptDefault_Text">getChildIndex</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">))</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">catch</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Error</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;WARNING: ObjectHandles failed to bring the object forward.&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>            
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">resetZOrder</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span> <span class="ActionScriptDefault_Text">autoBringForward</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptReserved">return</span>; <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">parent</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">ObjectHandlesCanvas</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">try</span>
                <span class="ActionScriptBracket/Brace">{</span>    
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">parent</span>.<span class="ActionScriptDefault_Text">getChildIndex</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">originalDepth</span> <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>             
                        <span class="ActionScriptDefault_Text">parent</span>.<span class="ActionScriptDefault_Text">setChildIndex</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span>, <span class="ActionScriptDefault_Text">originalDepth</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">catch</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Error</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;WARNING: ObjectHandles failed to reset the Z order.&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>            
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">dispatchRotating</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ObjectHandleEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ObjectHandleEvent</span>.<span class="ActionScriptDefault_Text">OBJECT_ROTATING_EVENT</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
         
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">dispatchRotated</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ObjectHandleEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ObjectHandleEvent</span>.<span class="ActionScriptDefault_Text">OBJECT_ROTATED_EVENT</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">dispatchMoving</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ObjectHandleEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ObjectHandleEvent</span>.<span class="ActionScriptDefault_Text">OBJECT_MOVING_EVENT</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">dispatchResizing</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ObjectHandleEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ObjectHandleEvent</span>.<span class="ActionScriptDefault_Text">OBJECT_RESIZING_EVENT</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
         
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">dispatchMoved</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ObjectHandleEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ObjectHandleEvent</span>.<span class="ActionScriptDefault_Text">OBJECT_MOVED_EVENT</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">dispatchResized</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ObjectHandleEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ObjectHandleEvent</span>.<span class="ActionScriptDefault_Text">OBJECT_RESIZED_EVENT</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onMouseDown</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>

            ﻿<span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">==</span> 0 <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">aspectRatio</span> <span class="ActionScriptOperator">=</span> 999; <span class="ActionScriptComment">// You probably want to set a minimum size to prevent this.                  
</span>            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">else</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">aspectRatio</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">height</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
                <span class="ActionScriptComment">//Only consider pixel exact mouse hits
</span>                       <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">pixelExactClick</span><span class="ActionScriptBracket/Brace">)</span>
                       <span class="ActionScriptBracket/Brace">{</span>

                               <span class="ActionScriptComment">// Copy content of this Instance
</span>                               <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">copyData</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">BitmapData</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">BitmapData</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">width</span>, <span class="ActionScriptDefault_Text">height</span>, <span class="ActionScriptReserved">true</span>, 0<span class="ActionScriptDefault_Text">x00000000</span><span class="ActionScriptBracket/Brace">)</span>;
                               <span class="ActionScriptDefault_Text">copyData</span>.<span class="ActionScriptDefault_Text">draw</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span>;

                               <span class="ActionScriptComment">// Get hit pixel
</span>                               <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">pixel</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">copyData</span>.<span class="ActionScriptDefault_Text">getPixel</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">localX</span>, <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">localY</span><span class="ActionScriptBracket/Brace">)</span>;

                               <span class="ActionScriptComment">// If pixel is transparent
</span>                               <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">pixel</span> <span class="ActionScriptOperator">&amp;</span> 0<span class="ActionScriptDefault_Text">xFF000000</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> 0<span class="ActionScriptDefault_Text">x00000000</span><span class="ActionScriptBracket/Brace">)</span>
                               <span class="ActionScriptBracket/Brace">{</span>

                                       <span class="ActionScriptComment">// If Event should be bubbled to other Selectables
</span>                                       <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">listenAllLayers</span><span class="ActionScriptBracket/Brace">)</span>
                                       <span class="ActionScriptBracket/Brace">{</span>

                                               <span class="ActionScriptComment">// All Selectables registered to the SelectionManager
</span>                                               <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">selectables</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">SelectionManager</span>.<span class="ActionScriptDefault_Text">instance</span>.<span class="ActionScriptDefault_Text">getItems</span><span class="ActionScriptBracket/Brace">()</span>;

                                               <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">h</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">DisplayObject</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">selectables</span><span class="ActionScriptBracket/Brace">){</span>

                                                       <span class="ActionScriptComment">// Don&apos;t check for this instance
</span>                                                       <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span>﻿<span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">h</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">DisplayObject</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">h</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">){</span>
                                                           
                                                                   ﻿<span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">h</span>.<span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">&lt;=</span> 0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">h</span>.<span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">&lt;=</span> 0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptReserved">continue</span>; <span class="ActionScriptBracket/Brace">}</span>

                                                               <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">selectableCopyData</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">BitmapData</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">BitmapData</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">h</span>.<span class="ActionScriptDefault_Text">width</span>, <span class="ActionScriptDefault_Text">h</span>.<span class="ActionScriptDefault_Text">height</span>, <span class="ActionScriptReserved">true</span>, 0<span class="ActionScriptDefault_Text">x00000000</span><span class="ActionScriptBracket/Brace">)</span>;
                                                               <span class="ActionScriptDefault_Text">selectableCopyData</span>.<span class="ActionScriptDefault_Text">draw</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">h</span><span class="ActionScriptBracket/Brace">)</span>;

                                                               <span class="ActionScriptComment">// Convert Clickpoint for other selectable
</span>                                                               <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">globalClickPoint</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageX</span>, <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageY</span><span class="ActionScriptBracket/Brace">)</span>;
                                                               <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">handleClickPoint</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">h</span>.<span class="ActionScriptDefault_Text">globalToLocal</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">globalClickPoint</span><span class="ActionScriptBracket/Brace">)</span>;

                                                               <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">selectablePixel</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">selectableCopyData</span>.<span class="ActionScriptDefault_Text">getPixel</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">handleClickPoint</span>.<span class="ActionScriptDefault_Text">x</span>, <span class="ActionScriptDefault_Text">handleClickPoint</span>.<span class="ActionScriptDefault_Text">y</span><span class="ActionScriptBracket/Brace">)</span>;

                                                               <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">selectablePixel</span> <span class="ActionScriptOperator">!=</span> 0<span class="ActionScriptDefault_Text">x00000000</span><span class="ActionScriptBracket/Brace">){</span>

                                                                       <span class="ActionScriptComment">// Now create a new event
</span>                                                                       <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MouseEvent</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">clone</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">MouseEvent</span>;
                                                                       <span class="ActionScriptComment">// Correct the local Clickpoint of the event
</span>                                                                       <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">hPoint</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageX</span>, <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageY</span><span class="ActionScriptBracket/Brace">)</span>;
                                                                       <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nPoint</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">h</span>.<span class="ActionScriptDefault_Text">globalToLocal</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">hPoint</span><span class="ActionScriptBracket/Brace">)</span>;

                                                                       <span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">localX</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">nPoint</span>.<span class="ActionScriptDefault_Text">x</span>;
                                                                       <span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">localY</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">nPoint</span>.<span class="ActionScriptDefault_Text">y</span>;

                                                                       <span class="ActionScriptComment">// Dispatch the event
</span>                                                                       ﻿<span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">h</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">ObjectHandles</span> <span class="ActionScriptBracket/Brace">)</span>
                                                                       <span class="ActionScriptBracket/Brace">{</span>
                                                                            <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">h</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ObjectHandles</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptBracket/Brace">)</span>;
                                                                       <span class="ActionScriptBracket/Brace">}</span>
                                                                       <span class="ActionScriptComment">// Don&apos;t process further
</span>                                                                       <span class="ActionScriptReserved">return</span>;
                                                               <span class="ActionScriptBracket/Brace">}</span>


                                                       <span class="ActionScriptBracket/Brace">}</span>

                                               <span class="ActionScriptBracket/Brace">}</span>

                                       <span class="ActionScriptBracket/Brace">}</span>

                                       <span class="ActionScriptReserved">return</span>;
                               <span class="ActionScriptBracket/Brace">}</span>

                       <span class="ActionScriptBracket/Brace">}</span>

             
            <span class="ActionScriptDefault_Text">setMouseCursor</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageX</span>, <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageY</span> <span class="ActionScriptBracket/Brace">)</span>;
                    
            <span class="ActionScriptDefault_Text">SelectionManager</span>.<span class="ActionScriptDefault_Text">instance</span>.<span class="ActionScriptDefault_Text">setSelected</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptComment">// Add a stage listener in case the mouse up comes out of the control.
</span>            <span class="ActionScriptDefault_Text">stage</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">MouseEvent</span>.<span class="ActionScriptDefault_Text">MOUSE_UP</span>, <span class="ActionScriptDefault_Text">onMouseUp</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">switchToGlobalMouseListener</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageX</span>, <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageY</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">localClickPoint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">globalToLocal</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">sp</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">localClickAngle</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getMouseAngle</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">localClickRotation</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">rotation</span>;
            
            <span class="ActionScriptComment">//var hits:Array = stage.getObjectsUnderPoint( sp );
</span>            
            <span class="ActionScriptDefault_Text">originalSize</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">width</span>;
            <span class="ActionScriptDefault_Text">originalSize</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">height</span>;
            <span class="ActionScriptDefault_Text">originalPosition</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">x</span>;
            <span class="ActionScriptDefault_Text">originalPosition</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">y</span>;
            
            <span class="ActionScriptDefault_Text">bringUp</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">handle</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Handle</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">handles</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">handle</span>.<span class="ActionScriptDefault_Text">hitTestPoint</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageX</span>, <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageY</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>                
                        ﻿<span class="ActionScriptDefault_Text">isCorner</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">handle</span>.<span class="ActionScriptDefault_Text">isCorner</span><span class="ActionScriptBracket/Brace">()</span>;                    
                        <span class="ActionScriptDefault_Text">isResizingDown</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">handle</span>.<span class="ActionScriptDefault_Text">resizeDown</span>;
                        <span class="ActionScriptDefault_Text">isResizingLeft</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">handle</span>.<span class="ActionScriptDefault_Text">resizeLeft</span>;
                        <span class="ActionScriptDefault_Text">isResizingRight</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">handle</span>.<span class="ActionScriptDefault_Text">resizeRight</span>;                    
                        <span class="ActionScriptDefault_Text">isResizingUp</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">handle</span>.<span class="ActionScriptDefault_Text">resizeUp</span>;
                        <span class="ActionScriptDefault_Text">isRotating</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">handle</span>.<span class="ActionScriptDefault_Text">rotate</span>;
                        
                        <span class="ActionScriptReserved">return</span>;
                    <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptDefault_Text">isResizingDown</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptDefault_Text">isResizingRight</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptDefault_Text">isResizingUp</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptDefault_Text">isResizingLeft</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptDefault_Text">isMoving</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            
            <span class="ActionScriptDefault_Text">setFocus</span><span class="ActionScriptBracket/Brace">()</span>;
            
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onMouseMove</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span> <span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptReserved">return</span>; <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">buttonDown</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">setMouseCursor</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageX</span>, <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageY</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">return</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">parent</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">return</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">dest</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parent</span>.<span class="ActionScriptDefault_Text">globalToLocal</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageX</span>, <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageY</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">desiredPos</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">desiredSize</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">desiredRotation</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;        
        
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">parent</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">Canvas</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">parentCanvas</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Canvas</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parent</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">Canvas</span>;
                <span class="ActionScriptDefault_Text">dest</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">parentCanvas</span>.<span class="ActionScriptDefault_Text">horizontalScrollPosition</span>;
                <span class="ActionScriptDefault_Text">dest</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">parentCanvas</span>.<span class="ActionScriptDefault_Text">verticalScrollPosition</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptDefault_Text">desiredRotation</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">rotation</span>;
            <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">width</span>;
            <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">height</span>;
            <span class="ActionScriptDefault_Text">desiredPos</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">x</span>;
            <span class="ActionScriptDefault_Text">desiredPos</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">y</span>;
            

            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bowAngle</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;<span class="ActionScriptComment">//Math.PI / 180 * Math.abs(rotation);
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">theMatrix</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Matrix</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">rotatedPoint</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span>;

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">xAlt</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">localClickPoint</span>.<span class="ActionScriptDefault_Text">x</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">yAlt</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">localClickPoint</span>.<span class="ActionScriptDefault_Text">y</span>;    
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">tX</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">tP</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">bowAngle</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Math</span>.<span class="ActionScriptDefault_Text">PI</span> <span class="ActionScriptOperator">/</span> 180 <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">rotation</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptOperator">-</span>1;                        


            <span class="ActionScriptDefault_Text">theMatrix</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Matrix</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">Math</span>.<span class="ActionScriptDefault_Text">cos</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bowAngle</span><span class="ActionScriptBracket/Brace">)</span>, <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">Math</span>.<span class="ActionScriptDefault_Text">sin</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bowAngle</span><span class="ActionScriptBracket/Brace">)</span>, <span class="ActionScriptDefault_Text">Math</span>.<span class="ActionScriptDefault_Text">sin</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bowAngle</span><span class="ActionScriptBracket/Brace">)</span>, <span class="ActionScriptDefault_Text">Math</span>.<span class="ActionScriptDefault_Text">cos</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bowAngle</span><span class="ActionScriptBracket/Brace">))</span>;
            <span class="ActionScriptDefault_Text">rotatedPoint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">theMatrix</span>.<span class="ActionScriptDefault_Text">transformPoint</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">xAlt</span>, <span class="ActionScriptDefault_Text">yAlt</span><span class="ActionScriptBracket/Brace">))</span>;
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">isRotating</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">buttonDown</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>        
                <span class="ActionScriptDefault_Text">desiredRotation</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Math</span>.<span class="ActionScriptDefault_Text">round</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">localClickRotation</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">localClickAngle</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">getMouseAngle</span><span class="ActionScriptBracket/Brace">())</span>;        
                <span class="ActionScriptDefault_Text">wasRotated</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptBracket/Brace">}</span>            
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">isResizingRight</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">buttonDown</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>                
                <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">originalSize</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">globalToLocal</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageX</span>, <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageY</span><span class="ActionScriptBracket/Brace">))</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">localClickPoint</span>.<span class="ActionScriptDefault_Text">x</span> ;
                <span class="ActionScriptDefault_Text">wasResized</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">isResizingDown</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">buttonDown</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>                
                <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">originalSize</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">globalToLocal</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageX</span>, <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">stageY</span><span class="ActionScriptBracket/Brace">))</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">localClickPoint</span>.<span class="ActionScriptDefault_Text">y</span> ;
                <span class="ActionScriptDefault_Text">wasResized</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">isResizingLeft</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">buttonDown</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">rotation</span> <span class="ActionScriptOperator">==</span> 0<span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>    
                <span class="ActionScriptDefault_Text">desiredPos</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">dest</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">localClickPoint</span>.<span class="ActionScriptDefault_Text">x</span>;
                <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">originalSize</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">originalPosition</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">desiredPos</span>.<span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">wasResized</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                <span class="ActionScriptDefault_Text">wasMoved</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">isResizingUp</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">buttonDown</span>  <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">rotation</span> <span class="ActionScriptOperator">==</span> 0<span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>    
                <span class="ActionScriptDefault_Text">desiredPos</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">dest</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">localClickPoint</span>.<span class="ActionScriptDefault_Text">y</span>;
                <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">originalSize</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">originalPosition</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">desiredPos</span>.<span class="ActionScriptDefault_Text">y</span><span class="ActionScriptBracket/Brace">)</span>;                                                
                <span class="ActionScriptDefault_Text">wasResized</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                <span class="ActionScriptDefault_Text">wasMoved</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptBracket/Brace">}</span>
                         
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">isMoving</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">buttonDown</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                                    
                <span class="ActionScriptDefault_Text">desiredPos</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">dest</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">rotatedPoint</span>.<span class="ActionScriptDefault_Text">y</span>;
                <span class="ActionScriptDefault_Text">desiredPos</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">dest</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">rotatedPoint</span>.<span class="ActionScriptDefault_Text">x</span>;

                
                <span class="ActionScriptDefault_Text">wasMoved</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;            
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wasResized</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">alwaysMaintainAspectRatio</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">||</span>
                <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wasResized</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">isCorner</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">cornerMaintainAspectRatio</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>                
                <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">aspectRatio</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">y</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">wasMoved</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">wasResized</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">applyConstraints</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">desiredPos</span>,<span class="ActionScriptDefault_Text">desiredSize</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">callLater</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">resizeMove</span>, <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">desiredPos</span>, <span class="ActionScriptDefault_Text">desiredSize</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wasRotated</span><span class="ActionScriptBracket/Brace">){</span>            
                
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">rotateFromCenter</span><span class="ActionScriptBracket/Brace">){</span>
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">rotateEffect</span>.<span class="ActionScriptDefault_Text">isPlaying</span><span class="ActionScriptBracket/Brace">){</span>
                        <span class="ActionScriptDefault_Text">rotateEffect</span>.<span class="ActionScriptDefault_Text">end</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptDefault_Text">rotateEffect</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Rotate</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptDefault_Text">rotateEffect</span>.<span class="ActionScriptDefault_Text">target</span>       <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span>;
                    <span class="ActionScriptDefault_Text">rotateEffect</span>.<span class="ActionScriptDefault_Text">duration</span>  <span class="ActionScriptOperator">=</span> 1;
                    <span class="ActionScriptDefault_Text">rotateEffect</span>.<span class="ActionScriptDefault_Text">angleFrom</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">rotation</span>;
                    <span class="ActionScriptDefault_Text">rotateEffect</span>.<span class="ActionScriptDefault_Text">angleTo</span>   <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">desiredRotation</span>;
                    <span class="ActionScriptDefault_Text">rotateEffect</span>.<span class="ActionScriptDefault_Text">originX</span>   <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">width</span><span class="ActionScriptOperator">/</span>2;
                    <span class="ActionScriptDefault_Text">rotateEffect</span>.<span class="ActionScriptDefault_Text">originY</span>   <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">height</span><span class="ActionScriptOperator">/</span>2;
                    <span class="ActionScriptDefault_Text">rotateEffect</span>.<span class="ActionScriptDefault_Text">play</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">rotation</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">desiredRotation</span>;
                <span class="ActionScriptBracket/Brace">}</span>                
            <span class="ActionScriptBracket/Brace">}</span>
            
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">wasMoved</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>    <span class="ActionScriptDefault_Text">dispatchMoving</span><span class="ActionScriptBracket/Brace">()</span> ; <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">wasResized</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>  <span class="ActionScriptDefault_Text">dispatchResizing</span><span class="ActionScriptBracket/Brace">()</span> ; <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">wasRotated</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>  <span class="ActionScriptDefault_Text">dispatchRotating</span><span class="ActionScriptBracket/Brace">()</span>; <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">updateAfterEvent</span><span class="ActionScriptBracket/Brace">()</span>;
            
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">resizeMove</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">desiredPos</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span>, <span class="ActionScriptDefault_Text">desiredSize</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>            
            <span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">x</span>;
            <span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">y</span>;            
            <span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">desiredPos</span>.<span class="ActionScriptDefault_Text">x</span>;
            <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">desiredPos</span>.<span class="ActionScriptDefault_Text">y</span>
            <span class="ActionScriptDefault_Text">validateNow</span><span class="ActionScriptBracket/Brace">()</span>;    
            
            <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot; &quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot; &quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">width</span><span class="ActionScriptBracket/Brace">))</span> ;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">override</span> <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">width</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">value</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;W&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">value</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">super</span>.<span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">value</span>;            
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">override</span> <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">value</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;X&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">value</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">super</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">value</span>;
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">showHandles</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">visible</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">u</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">UIComponent</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">handles</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">u</span>.<span class="ActionScriptDefault_Text">setVisible</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">visible</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>            
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * On startup, creates the various handles that the user can interact with.
         **/</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createHandles</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">Array</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">handles</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptComment">// position ... top,left,bottom,right ... 1=on 
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">defaultHandleOptions</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span>  <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">rotate</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeUp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>, <span class="ActionScriptDefault_Text">resizeDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeRight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeLeft</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">:</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">top</span><span class="ActionScriptOperator">:</span>0, <span class="ActionScriptDefault_Text">horizontalCenter</span><span class="ActionScriptOperator">:</span>0 <span class="ActionScriptBracket/Brace">}}</span>,
                                         <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">rotate</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeUp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>, <span class="ActionScriptDefault_Text">resizeDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeRight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeLeft</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>,<span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">:</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">top</span><span class="ActionScriptOperator">:</span>0, <span class="ActionScriptDefault_Text">left</span><span class="ActionScriptOperator">:</span>0 <span class="ActionScriptBracket/Brace">}}</span>,
                                         <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">rotate</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeUp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>, <span class="ActionScriptDefault_Text">resizeDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeRight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>, <span class="ActionScriptDefault_Text">resizeLeft</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>,<span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">:</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">top</span><span class="ActionScriptOperator">:</span>0, <span class="ActionScriptDefault_Text">right</span><span class="ActionScriptOperator">:</span>0<span class="ActionScriptBracket/Brace">}}</span>,
                                         <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">rotate</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeUp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>, <span class="ActionScriptDefault_Text">resizeRight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeLeft</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>,<span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">:</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">bottom</span><span class="ActionScriptOperator">:</span>0, <span class="ActionScriptDefault_Text">horizontalCenter</span><span class="ActionScriptOperator">:</span>0 <span class="ActionScriptBracket/Brace">}}</span>,
                                         <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">rotate</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeUp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>, <span class="ActionScriptDefault_Text">resizeRight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeLeft</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>,<span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">:</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">bottom</span><span class="ActionScriptOperator">:</span>0, <span class="ActionScriptDefault_Text">left</span><span class="ActionScriptOperator">:</span>0 <span class="ActionScriptBracket/Brace">}}</span>,
                                         <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">rotate</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeUp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>, <span class="ActionScriptDefault_Text">resizeRight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>, <span class="ActionScriptDefault_Text">resizeLeft</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>,<span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">:</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">bottom</span><span class="ActionScriptOperator">:</span>0, <span class="ActionScriptDefault_Text">right</span><span class="ActionScriptOperator">:</span>0<span class="ActionScriptBracket/Brace">}}</span>,
                                         <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">rotate</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeUp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeRight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeLeft</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>,<span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">:</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">verticalCenter</span><span class="ActionScriptOperator">:</span>0, <span class="ActionScriptDefault_Text">left</span><span class="ActionScriptOperator">:</span>0<span class="ActionScriptBracket/Brace">}}</span>,
                                         <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">rotate</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeUp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeRight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>, <span class="ActionScriptDefault_Text">resizeLeft</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>,<span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">:</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">verticalCenter</span><span class="ActionScriptOperator">:</span>0, <span class="ActionScriptDefault_Text">right</span><span class="ActionScriptOperator">:</span>0<span class="ActionScriptBracket/Brace">}}</span>,
                                         <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">rotate</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>,  <span class="ActionScriptDefault_Text">resizeUp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeRight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeLeft</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>,<span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">:</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">verticalCenter</span><span class="ActionScriptOperator">:</span>2, <span class="ActionScriptDefault_Text">right</span><span class="ActionScriptOperator">:-</span>4<span class="ActionScriptBracket/Brace">}}</span>
                                        <span class="ActionScriptBracket/Brace">]</span>;    

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">imgHandleOptions</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span>  <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">rotate</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeUp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>, <span class="ActionScriptDefault_Text">resizeDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeRight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeLeft</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">:</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">top</span><span class="ActionScriptOperator">:-</span>0.5, <span class="ActionScriptDefault_Text">horizontalCenter</span><span class="ActionScriptOperator">:</span>0 <span class="ActionScriptBracket/Brace">}}</span>,
                                         <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">rotate</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeUp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>, <span class="ActionScriptDefault_Text">resizeDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeRight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeLeft</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>,<span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">:</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">top</span><span class="ActionScriptOperator">:-</span>0.5, <span class="ActionScriptDefault_Text">left</span><span class="ActionScriptOperator">:-</span>0.5<span class="ActionScriptBracket/Brace">}}</span>,
                                         <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">rotate</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeUp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>, <span class="ActionScriptDefault_Text">resizeDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeRight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>, <span class="ActionScriptDefault_Text">resizeLeft</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>,<span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">:</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">top</span><span class="ActionScriptOperator">:-</span>0.5, <span class="ActionScriptDefault_Text">right</span><span class="ActionScriptOperator">:-</span>0.5<span class="ActionScriptBracket/Brace">}}</span>,
                                         <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">rotate</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeUp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>, <span class="ActionScriptDefault_Text">resizeRight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeLeft</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>,<span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">:</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">bottom</span><span class="ActionScriptOperator">:-</span>0.5, <span class="ActionScriptDefault_Text">horizontalCenter</span><span class="ActionScriptOperator">:</span>0 <span class="ActionScriptBracket/Brace">}}</span>,
                                         <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">rotate</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeUp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>, <span class="ActionScriptDefault_Text">resizeRight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeLeft</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>,<span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">:</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">bottom</span><span class="ActionScriptOperator">:-</span>0.5, <span class="ActionScriptDefault_Text">left</span><span class="ActionScriptOperator">:-</span>0.5 <span class="ActionScriptBracket/Brace">}}</span>,
                                         <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">rotate</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeUp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>, <span class="ActionScriptDefault_Text">resizeRight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>, <span class="ActionScriptDefault_Text">resizeLeft</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>,<span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">:</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">bottom</span><span class="ActionScriptOperator">:-</span>0.5, <span class="ActionScriptDefault_Text">right</span><span class="ActionScriptOperator">:-</span>0.5<span class="ActionScriptBracket/Brace">}}</span>,
                                         <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">rotate</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeUp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeRight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeLeft</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>,<span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">:</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">verticalCenter</span><span class="ActionScriptOperator">:</span>0, <span class="ActionScriptDefault_Text">left</span><span class="ActionScriptOperator">:-</span>0.5<span class="ActionScriptBracket/Brace">}}</span>,
                                         <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">rotate</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeUp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeRight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>, <span class="ActionScriptDefault_Text">resizeLeft</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>,<span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">:</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">verticalCenter</span><span class="ActionScriptOperator">:</span>0, <span class="ActionScriptDefault_Text">right</span><span class="ActionScriptOperator">:-</span>0.5<span class="ActionScriptBracket/Brace">}}</span>,
                                         <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">rotate</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">true</span>,  <span class="ActionScriptDefault_Text">resizeUp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeDown</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeRight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">resizeLeft</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">false</span>,<span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">:</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">verticalCenter</span><span class="ActionScriptOperator">:</span>0.5, <span class="ActionScriptDefault_Text">right</span><span class="ActionScriptOperator">:-</span>1<span class="ActionScriptBracket/Brace">}}</span>
                                        <span class="ActionScriptBracket/Brace">]</span>;    
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">handleOptions</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">resizeHandleImage</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">imgHandleOptions</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">defaultHandleOptions</span>;
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">option</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">handleOptions</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                
﻿                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isCorner</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> 2 <span class="ActionScriptOperator">==</span> <span class="ActionScriptBracket/Brace">(</span>      <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">resizeUp</span> <span class="ActionScriptOperator">?</span> 1 <span class="ActionScriptOperator">:</span> 0 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">+</span>
                                   <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">resizeDown</span> <span class="ActionScriptOperator">?</span> 1 <span class="ActionScriptOperator">:</span> 0 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">+</span>
                                   <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">resizeLeft</span> <span class="ActionScriptOperator">?</span> 1 <span class="ActionScriptOperator">:</span> 0 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">+</span>
                                   <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">resizeRight</span> <span class="ActionScriptOperator">?</span> 1 <span class="ActionScriptOperator">:</span> 0 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptComment">// Corners can resize in 2 directions.
</span>                
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(!</span> <span class="ActionScriptDefault_Text">isCorner</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">alwaysMaintainAspectRatio</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>                    
                    <span class="ActionScriptReserved">continue</span>; <span class="ActionScriptComment">// We don&apos;t show handles that you can&apos;t use.
</span>                <span class="ActionScriptBracket/Brace">}</span>
                
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(!</span> <span class="ActionScriptDefault_Text">allowRotate</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">rotate</span> <span class="ActionScriptBracket/Brace">)</span>                
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">continue</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(!</span> <span class="ActionScriptDefault_Text">allowHResize</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">resizeLeft</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">resizeRight</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">continue</span>;                    
                <span class="ActionScriptBracket/Brace">}</span>

                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(!</span> <span class="ActionScriptDefault_Text">allowVResize</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">resizeUp</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">resizeDown</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">continue</span>;                    
                <span class="ActionScriptBracket/Brace">}</span>
                
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(!</span> <span class="ActionScriptDefault_Text">allowVMove</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">resizeUp</span>  <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">continue</span>;                    
                <span class="ActionScriptBracket/Brace">}</span>


                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(!</span> <span class="ActionScriptDefault_Text">allowHMove</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">resizeLeft</span>  <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">continue</span>;                    
                <span class="ActionScriptBracket/Brace">}</span>
                
                
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">handle</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Handle</span>;
                
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">rotate</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">rotateHandleImage</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">handle</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ImageHandle</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">rotateHandleImage</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span>  <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">resizeHandleImage</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">handle</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ImageHandle</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">resizeHandleImage</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">else</span>
                <span class="ActionScriptBracket/Brace">{</span>                
                    <span class="ActionScriptDefault_Text">handle</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Handle</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                                
                <span class="ActionScriptDefault_Text">handle</span>.<span class="ActionScriptDefault_Text">resizeDown</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">resizeDown</span>;
                <span class="ActionScriptDefault_Text">handle</span>.<span class="ActionScriptDefault_Text">resizeLeft</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">resizeLeft</span>;
                <span class="ActionScriptDefault_Text">handle</span>.<span class="ActionScriptDefault_Text">resizeRight</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">resizeRight</span>;
                <span class="ActionScriptDefault_Text">handle</span>.<span class="ActionScriptDefault_Text">resizeUp</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">resizeUp</span>;
                <span class="ActionScriptDefault_Text">handle</span>.<span class="ActionScriptDefault_Text">rotate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">rotate</span>;
                <span class="ActionScriptDefault_Text">handle</span>.<span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                
                                
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">prop</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">style</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">switch</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">prop</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;top&quot;</span><span class="ActionScriptOperator">:</span>
                        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;bottom&quot;</span><span class="ActionScriptOperator">:</span>
                             <span class="ActionScriptDefault_Text">handle</span>.<span class="ActionScriptDefault_Text">setStyle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">prop</span>, <span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">style</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">prop</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">handle</span>.<span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptBracket/Brace">)</span>;
                             <span class="ActionScriptReserved">break</span>;
                         <span class="ActionScriptReserved">default</span><span class="ActionScriptOperator">:</span>
                             <span class="ActionScriptDefault_Text">handle</span>.<span class="ActionScriptDefault_Text">setStyle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">prop</span>, <span class="ActionScriptDefault_Text">option</span>.<span class="ActionScriptDefault_Text">style</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">prop</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">handle</span>.<span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptBracket/Brace">)</span>;
                             <span class="ActionScriptReserved">break</span>;
                     <span class="ActionScriptBracket/Brace">}</span>          
                  <span class="ActionScriptBracket/Brace">}</span>
                  
                <span class="ActionScriptReserved">super</span>.<span class="ActionScriptDefault_Text">addChild</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">handle</span><span class="ActionScriptBracket/Brace">)</span>;    
                <span class="ActionScriptDefault_Text">handles</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">handle</span><span class="ActionScriptBracket/Brace">)</span>;        
            <span class="ActionScriptBracket/Brace">}</span>                                        
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">handles</span>;
        <span class="ActionScriptBracket/Brace">}</span>        
        
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">applyConstraints</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">desiredPositon</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span>, <span class="ActionScriptDefault_Text">desiredSize</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">diff</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>;
            
        <span class="ActionScriptComment">//    var
</span>            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">effectiveMinHeight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">minHeight</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">effectiveMinWidth</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptDefault_Text">minWidth</span>;
<span class="ActionScriptComment">/*
    I can&apos;t rememember why I put this Math.max in there... the maxHorizontalPosition was big
    in a project I had and was causing problems so I&apos;ve removed it for now.
                
            var effectiveMinHeight:Number = Math.max( minHeight, maxVerticalScrollPosition );
            var effectiveMinWidth:Number = Math.max( minWidth, maxHorizontalScrollPosition );
*/</span>            
            <span class="ActionScriptComment">// Minimum height check
</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">effectiveMinHeight</span>  <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">diff</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">effectiveMinHeight</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">y</span>;
                <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">effectiveMinHeight</span>;
                
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">desiredPositon</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">desiredPositon</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">-=</span> <span class="ActionScriptDefault_Text">diff</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// Minimum width check
</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">effectiveMinWidth</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">diff</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">effectiveMinWidth</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">x</span>;
                <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">effectiveMinWidth</span>;
                
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">desiredPositon</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">desiredPositon</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">-=</span> <span class="ActionScriptDefault_Text">diff</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            
            
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span> <span class="ActionScriptDefault_Text">allowHMove</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">desiredPositon</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">originalPosition</span>.<span class="ActionScriptDefault_Text">x</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span> <span class="ActionScriptDefault_Text">allowVMove</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">desiredPositon</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">originalPosition</span>.<span class="ActionScriptDefault_Text">y</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">yAnchor</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptOperator">-</span>1 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">yAnchor</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">desiredPositon</span>.<span class="ActionScriptDefault_Text">y</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">diff</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">desiredPositon</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">yAnchor</span>;
                <span class="ActionScriptDefault_Text">desiredPositon</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">yAnchor</span>;
                                                
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">diff</span>;    
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">xAnchor</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptOperator">-</span>1 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">xAnchor</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">desiredPositon</span>.<span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">diff</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">desiredPositon</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">xAnchor</span>;
                <span class="ActionScriptDefault_Text">desiredPositon</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xAnchor</span>;
                                                
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">diff</span>;    
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">xAnchor</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptOperator">-</span>1 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">xAnchor</span> <span class="ActionScriptOperator">&gt;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">desiredPositon</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">))</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">diff</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xAnchor</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">desiredPositon</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">)</span> ;                                                                
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">diff</span>;    
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">desiredPositon</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xAnchor</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">x</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">yAnchor</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptOperator">-</span>1 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">yAnchor</span> <span class="ActionScriptOperator">&gt;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">desiredPositon</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">y</span><span class="ActionScriptBracket/Brace">))</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">diff</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">yAnchor</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">desiredPositon</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">y</span><span class="ActionScriptBracket/Brace">)</span> ;                                                                
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">diff</span>;    
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">desiredPositon</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">yAnchor</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">desiredSize</span>.<span class="ActionScriptDefault_Text">y</span>;
            <span class="ActionScriptBracket/Brace">}</span>
    
    
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">select</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>    
            <span class="ActionScriptDefault_Text">showHandles</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ObjectHandleEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ObjectHandleEvent</span>.<span class="ActionScriptDefault_Text">OBJECT_SELECTED</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;        
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">deselect</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>            
            <span class="ActionScriptDefault_Text">drawFocus</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">showHandles</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ObjectHandleEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ObjectHandleEvent</span>.<span class="ActionScriptDefault_Text">OBJECT_DESELECTED</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;        
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getMouseAngle</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">Math</span>.<span class="ActionScriptDefault_Text">atan2</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">parent</span>.<span class="ActionScriptDefault_Text">mouseY</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">y</span>, <span class="ActionScriptDefault_Text">parent</span>.<span class="ActionScriptDefault_Text">mouseX</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">*</span> 180<span class="ActionScriptOperator">/</span><span class="ActionScriptDefault_Text">Math</span>.<span class="ActionScriptDefault_Text">PI</span>; 
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">setKeyboardFocus</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">drawFocus</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">setFocus</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptBracket/Brace">}</span>
                



    <span class="ActionScriptBracket/Brace">}</span>
    

    
<span class="ActionScriptBracket/Brace">}</span>
</pre></body>
</html>
