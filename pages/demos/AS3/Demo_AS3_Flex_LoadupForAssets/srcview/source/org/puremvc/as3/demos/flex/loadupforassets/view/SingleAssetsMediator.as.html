<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>SingleAssetsMediator.as</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../../SourceStyles.css"/>
</head>

<body><pre><span class="ActionScriptComment">/*
    PureMVC Flex Demo - LoadupForAssets - loading assets with the Loadup utility
    Copyright (c) 2008 Philip Sexton &lt;philip.sexton@puremvc.org&gt;
    Your reuse is governed by the Creative Commons Attribution 3.0 License
*/</span>
<span class="ActionScriptpackage">package</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">demos</span>.<span class="ActionScriptDefault_Text">flex</span>.<span class="ActionScriptDefault_Text">loadupforassets</span>.<span class="ActionScriptDefault_Text">view</span> <span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">events</span>.<span class="ActionScriptDefault_Text">Event</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">display</span>.<span class="ActionScriptDefault_Text">Bitmap</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">display</span>.<span class="ActionScriptDefault_Text">DisplayObjectContainer</span>;

    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">collections</span>.<span class="ActionScriptDefault_Text">ArrayCollection</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">collections</span>.<span class="ActionScriptDefault_Text">ListCollectionView</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">controls</span>.<span class="ActionScriptDefault_Text">Alert</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">controls</span>.<span class="ActionScriptDefault_Text">Image</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">core</span>.<span class="ActionScriptDefault_Text">UIComponent</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">events</span>.<span class="ActionScriptDefault_Text">ItemClickEvent</span>;
    
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">demos</span>.<span class="ActionScriptDefault_Text">flex</span>.<span class="ActionScriptDefault_Text">loadupforassets</span>.<span class="ActionScriptDefault_Text">ApplicationFacade</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">interfaces</span>.<span class="ActionScriptDefault_Text">IMediator</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">interfaces</span>.<span class="ActionScriptDefault_Text">INotification</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">interfaces</span>.<span class="ActionScriptDefault_Text">IProxy</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">patterns</span>.<span class="ActionScriptDefault_Text">mediator</span>.<span class="ActionScriptDefault_Text">Mediator</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">patterns</span>.<span class="ActionScriptDefault_Text">proxy</span>.<span class="ActionScriptDefault_Text">Proxy</span>;

    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">utilities</span>.<span class="ActionScriptDefault_Text">loadup</span>.<span class="ActionScriptDefault_Text">Loadup</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">utilities</span>.<span class="ActionScriptDefault_Text">loadup</span>.<span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">LoadupMonitorProxy</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">utilities</span>.<span class="ActionScriptDefault_Text">loadup</span>.<span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">RetryParameters</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">utilities</span>.<span class="ActionScriptDefault_Text">loadup</span>.<span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">RetryPolicy</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">utilities</span>.<span class="ActionScriptDefault_Text">loadup</span>.<span class="ActionScriptDefault_Text">interfaces</span>.<span class="ActionScriptDefault_Text">ILoadupProxy</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">utilities</span>.<span class="ActionScriptDefault_Text">loadup</span>.<span class="ActionScriptDefault_Text">controller</span>.<span class="ActionScriptDefault_Text">LoadupResourceLoadedCommand</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">utilities</span>.<span class="ActionScriptDefault_Text">loadup</span>.<span class="ActionScriptDefault_Text">controller</span>.<span class="ActionScriptDefault_Text">LoadupResourceFailedCommand</span>;

    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">utilities</span>.<span class="ActionScriptDefault_Text">loadup</span>.<span class="ActionScriptDefault_Text">assetloader</span>.<span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">AssetGroupProxy</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">utilities</span>.<span class="ActionScriptDefault_Text">loadup</span>.<span class="ActionScriptDefault_Text">assetloader</span>.<span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">AssetProxy</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">utilities</span>.<span class="ActionScriptDefault_Text">loadup</span>.<span class="ActionScriptDefault_Text">assetloader</span>.<span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">FlexAssetTypeMap</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">utilities</span>.<span class="ActionScriptDefault_Text">loadup</span>.<span class="ActionScriptDefault_Text">assetloader</span>.<span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">AssetFactory</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">utilities</span>.<span class="ActionScriptDefault_Text">loadup</span>.<span class="ActionScriptDefault_Text">assetloader</span>.<span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">AssetLoaderFactory</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">utilities</span>.<span class="ActionScriptDefault_Text">loadup</span>.<span class="ActionScriptDefault_Text">assetloader</span>.<span class="ActionScriptDefault_Text">interfaces</span>.<span class="ActionScriptDefault_Text">IAsset</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">utilities</span>.<span class="ActionScriptDefault_Text">loadup</span>.<span class="ActionScriptDefault_Text">assetloader</span>.<span class="ActionScriptDefault_Text">interfaces</span>.<span class="ActionScriptDefault_Text">IAssetForFlex</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">utilities</span>.<span class="ActionScriptDefault_Text">loadup</span>.<span class="ActionScriptDefault_Text">assetloader</span>.<span class="ActionScriptDefault_Text">interfaces</span>.<span class="ActionScriptDefault_Text">IAssetTypeMap</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">utilities</span>.<span class="ActionScriptDefault_Text">loadup</span>.<span class="ActionScriptDefault_Text">assetloader</span>.<span class="ActionScriptDefault_Text">interfaces</span>.<span class="ActionScriptDefault_Text">IAssetFactory</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">utilities</span>.<span class="ActionScriptDefault_Text">loadup</span>.<span class="ActionScriptDefault_Text">assetloader</span>.<span class="ActionScriptDefault_Text">interfaces</span>.<span class="ActionScriptDefault_Text">IAssetLoaderFactory</span>;

    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span>.<span class="ActionScriptDefault_Text">puremvc</span>.<span class="ActionScriptDefault_Text">as3</span>.<span class="ActionScriptDefault_Text">demos</span>.<span class="ActionScriptDefault_Text">flex</span>.<span class="ActionScriptDefault_Text">loadupforassets</span>.<span class="ActionScriptDefault_Text">view</span>.<span class="ActionScriptDefault_Text">components</span>.<span class="ActionScriptDefault_Text">SingleAssets</span>;

    <span class="ActionScriptReserved">public</span> <span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">SingleAssetsMediator</span> <span class="ActionScriptReserved">extends</span> <span class="ActionScriptDefault_Text">Mediator</span> <span class="ActionScriptReserved">implements</span> <span class="ActionScriptDefault_Text">IMediator</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">NAME</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;SingleAssetsMediator&quot;</span>;

        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">progressMessages</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ListCollectionView</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">assetGroupProxy</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">AssetGroupProxy</span>;

        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">SingleAssetsMediator</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">viewComponent</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">super</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">NAME</span>, <span class="ActionScriptDefault_Text">viewComponent</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">override</span> <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onRegister</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">singleAssets</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">ItemClickEvent</span>.<span class="ActionScriptDefault_Text">ITEM_CLICK</span>, <span class="ActionScriptDefault_Text">onShowAsset</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">singleAssets</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">SingleAssets</span>.<span class="ActionScriptDefault_Text">FINISHED</span>, <span class="ActionScriptDefault_Text">onFinished</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">singleAssets</span>.<span class="ActionScriptDefault_Text">progressMessages</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">progressMessages</span>;

            <span class="ActionScriptDefault_Text">createSingleAssetsLoadEnv</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">assetGroupProxy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">facade</span>.<span class="ActionScriptDefault_Text">retrieveProxy</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">ApplicationFacade</span>.<span class="ActionScriptDefault_Text">SINGLE_ASSETS_GROUP_PROXY_NAME</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">AssetGroupProxy</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">singleAssets</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">SingleAssets</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">viewComponent</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">SingleAssets</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">assetsDisplayComponent</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">UIComponent</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">singleAssets</span>.<span class="ActionScriptDefault_Text">assetsDisplayComponent</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">UIComponent</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptComment">/*protected function get assetsDisplayComponent() :DisplayObjectContainer {
            return singleAssets.assetsDisplayComponent as DisplayObjectContainer;
        }*/</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">controlsDisplayComponent</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">UIComponent</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">singleAssets</span>.<span class="ActionScriptDefault_Text">controlsDisplayComponent</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">UIComponent</span>;
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onShowAsset</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">event</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ItemClickEvent</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">singles</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Proxy</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">facade</span>.<span class="ActionScriptDefault_Text">retrieveProxy</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">ApplicationFacade</span>.<span class="ActionScriptDefault_Text">SINGLE_URLS</span><span class="ActionScriptBracket/Brace">))</span>.<span class="ActionScriptDefault_Text">getData</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">Object</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">singles</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">label</span> <span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">processAssetRequest</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">else</span>
                <span class="ActionScriptDefault_Text">Alert</span>.<span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;Unknown label for a single url, label=&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">label</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onFinished</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Event</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">closeSingleAssetsLoadEnv</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">removeSingleAssetsLoadEnv</span><span class="ActionScriptBracket/Brace">()</span>;        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">processAssetRequest</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">assetPx</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">AssetProxy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">assetGroupProxy</span>.<span class="ActionScriptDefault_Text">getAssetProxy</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">asset</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">IAsset</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">assetGroupProxy</span>.<span class="ActionScriptDefault_Text">getAsset</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">assetPx</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">assetPx</span>.<span class="ActionScriptDefault_Text">isLoaded</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">addAssetToAssetsDisplayComponent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">assetPx</span>.<span class="ActionScriptDefault_Text">asset</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">progressMessages</span>.<span class="ActionScriptDefault_Text">addItemAt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;Displayed an already loaded asset : &quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">assetPx</span>.<span class="ActionScriptDefault_Text">asset</span>.<span class="ActionScriptDefault_Text">url</span>, 0<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptComment">// Else assume loading is in progress; wait for completion and asset to be available
</span>                <span class="ActionScriptComment">// via NEW_ASSET_AVAILABLE notification.
</span>            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">else</span>
                <span class="ActionScriptDefault_Text">loadSingleAsset</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addAssetToAssetsDisplayComponent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">asset</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">IAsset</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">uic</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">UIComponent</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">asset</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">IAssetForFlex</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">uiComponent</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span> <span class="ActionScriptDefault_Text">uic</span>.<span class="ActionScriptDefault_Text">parent</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">addAssetPremierToAssetsDisplayComponent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">uic</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">else</span>
                <span class="ActionScriptDefault_Text">addAssetRepeatToAssetsDisplayComponent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">uic</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addAssetPremierToAssetsDisplayComponent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">uic</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">UIComponent</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">uic</span>.<span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">=</span> 120;
            <span class="ActionScriptDefault_Text">uic</span>.<span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">=</span> 120;
            <span class="ActionScriptDefault_Text">assetsDisplayComponent</span>.<span class="ActionScriptDefault_Text">addChild</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">uic</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addAssetRepeatToAssetsDisplayComponent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">uic</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">UIComponent</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">//var uic :UIComponent = (asset as IAssetForFlex).uiComponent;
</span>            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">uic</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">Image</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bm</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Bitmap</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Bitmap</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">((</span> <span class="ActionScriptDefault_Text">uic</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">Image</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">content</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">Bitmap</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">bitmapData</span>.<span class="ActionScriptDefault_Text">clone</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">disp</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Image</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Image</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">disp</span>.<span class="ActionScriptDefault_Text">load</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">bm</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">disp</span>.<span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">=</span> 60;
                <span class="ActionScriptDefault_Text">disp</span>.<span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">=</span> 60;
                <span class="ActionScriptDefault_Text">assetsDisplayComponent</span>.<span class="ActionScriptDefault_Text">addChild</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">disp</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptASDoc">/**
         *  We choose to ignore the following notifications:&lt;ul&gt;
         *  &lt;li&gt;Loadup.LOADING_PROGRESS&lt;/li&gt;
         *  &lt;li&gt;Loadup.LOAD_RESOURCE_TIMED_OUT&lt;/li&gt;
         *  &lt;li&gt;Loadup.WAITING_FOR_MORE_RESOURCES&lt;/li&gt;
         *  &lt;li&gt;Loadup.ASSET_GROUP_LOAD_PROGRESS&lt;/li&gt;
         *  &lt;/ul&gt;
         */</span>
        <span class="ActionScriptReserved">override</span> <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">listNotificationInterests</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptBracket/Brace">[</span>
                <span class="ActionScriptDefault_Text">Loadup</span>.<span class="ActionScriptDefault_Text">LOADING_COMPLETE</span>,
                <span class="ActionScriptDefault_Text">Loadup</span>.<span class="ActionScriptDefault_Text">LOADING_FINISHED_INCOMPLETE</span>,
                <span class="ActionScriptDefault_Text">Loadup</span>.<span class="ActionScriptDefault_Text">CALL_OUT_OF_SYNC_IGNORED</span>,

                <span class="ActionScriptDefault_Text">Loadup</span>.<span class="ActionScriptDefault_Text">RETRYING_LOAD_RESOURCE</span>,

                <span class="ActionScriptComment">//Loadup.ASSET_LOAD_FAILED,
</span>                <span class="ActionScriptDefault_Text">Loadup</span>.<span class="ActionScriptDefault_Text">ASSET_LOAD_FAILED_IOERROR</span>,
                <span class="ActionScriptDefault_Text">Loadup</span>.<span class="ActionScriptDefault_Text">ASSET_LOAD_FAILED_SECURITY</span>,
                <span class="ActionScriptDefault_Text">Loadup</span>.<span class="ActionScriptDefault_Text">NEW_ASSET_AVAILABLE</span>,
                <span class="ActionScriptDefault_Text">Loadup</span>.<span class="ActionScriptDefault_Text">URL_REFUSED_PROXY_NAME_ALREADY_EXISTS</span>
                <span class="ActionScriptBracket/Brace">]</span>;
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptASDoc">/**
         *  All the notifications to be handled, whether from Loadup Monitor or
         *  AssetGroupProxy, are of interest only if the notification type matches
         *  the Proxy Name for the Loadup Monitor instance handling these
         *  single assets.
         */</span>
        <span class="ActionScriptReserved">override</span> <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">handleNotification</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">note</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">INotification</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">note</span>.<span class="ActionScriptDefault_Text">getType</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">ApplicationFacade</span>.<span class="ActionScriptDefault_Text">SINGLE_ASSETS_LU_PROXY_NAME</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">doHandleNotification</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">note</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">doHandleNotification</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">note</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">INotification</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">errMsg</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptReserved">switch</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">note</span>.<span class="ActionScriptDefault_Text">getName</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">/*case Loadup.ASSET_LOAD_FAILED:
                    progressMessages.addItemAt( &quot;Asset Load Failed&quot;, 0);
                    break;*/</span>

                <span class="ActionScriptReserved">case</span> <span class="ActionScriptDefault_Text">Loadup</span>.<span class="ActionScriptDefault_Text">ASSET_LOAD_FAILED_IOERROR</span><span class="ActionScriptOperator">:</span>
                <span class="ActionScriptReserved">case</span> <span class="ActionScriptDefault_Text">Loadup</span>.<span class="ActionScriptDefault_Text">ASSET_LOAD_FAILED_SECURITY</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">assetPx</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">AssetProxy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">note</span>.<span class="ActionScriptDefault_Text">getBody</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">AssetProxy</span>;
                    <span class="ActionScriptDefault_Text">errMsg</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">note</span>.<span class="ActionScriptDefault_Text">getBody</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">AssetProxy</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">getLoadingErrorMessage</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptDefault_Text">progressMessages</span>.<span class="ActionScriptDefault_Text">addItemAt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;Asset Load Failed, Asset=&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">assetPx</span>.<span class="ActionScriptDefault_Text">url</span>, 0<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">progressMessages</span>.<span class="ActionScriptDefault_Text">addItemAt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;...Msg=&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">errMsg</span>, 1<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">textPart</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">errMsg</span>.<span class="ActionScriptDefault_Text">match</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">/text=.*?\Z/</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">textPart</span> <span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptDefault_Text">progressMessages</span>.<span class="ActionScriptDefault_Text">addItemAt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;...&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">textPart</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>, 2<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">break</span>;

                <span class="ActionScriptReserved">case</span> <span class="ActionScriptDefault_Text">Loadup</span>.<span class="ActionScriptDefault_Text">NEW_ASSET_AVAILABLE</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptDefault_Text">addAssetPremierToAssetsDisplayComponent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">note</span>.<span class="ActionScriptDefault_Text">getBody</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">IAssetForFlex</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">uiComponent</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">progressMessages</span>.<span class="ActionScriptDefault_Text">addItemAt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;Displayed new asset: &quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">note</span>.<span class="ActionScriptDefault_Text">getBody</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">IAsset</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">url</span>, 0<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">break</span>;

                <span class="ActionScriptReserved">case</span> <span class="ActionScriptDefault_Text">Loadup</span>.<span class="ActionScriptDefault_Text">URL_REFUSED_PROXY_NAME_ALREADY_EXISTS</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptDefault_Text">progressMessages</span>.<span class="ActionScriptDefault_Text">addItemAt</span><span class="ActionScriptBracket/Brace">(</span> 
                        <span class="ActionScriptString">&quot;Asset Url Refused, Proxy Name Already Exists, url=&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">note</span>.<span class="ActionScriptDefault_Text">getBody</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">String</span>, 0 <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">break</span>;

                <span class="ActionScriptReserved">case</span> <span class="ActionScriptDefault_Text">Loadup</span>.<span class="ActionScriptDefault_Text">RETRYING_LOAD_RESOURCE</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptDefault_Text">progressMessages</span>.<span class="ActionScriptDefault_Text">addItemAt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;Retrying&quot;</span>, 0<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">break</span>;

                <span class="ActionScriptReserved">case</span> <span class="ActionScriptDefault_Text">Loadup</span>.<span class="ActionScriptDefault_Text">LOADING_COMPLETE</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptDefault_Text">progressMessages</span>.<span class="ActionScriptDefault_Text">addItemAt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;Loading Complete, All Requested Assets Loaded&quot;</span>, 0<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">break</span>;

                <span class="ActionScriptReserved">case</span> <span class="ActionScriptDefault_Text">Loadup</span>.<span class="ActionScriptDefault_Text">LOADING_FINISHED_INCOMPLETE</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptDefault_Text">progressMessages</span>.<span class="ActionScriptDefault_Text">addItemAt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;Loading Finished BUT INCOMPLETE&quot;</span>, 0<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">break</span>;

                <span class="ActionScriptReserved">case</span> <span class="ActionScriptDefault_Text">Loadup</span>.<span class="ActionScriptDefault_Text">CALL_OUT_OF_SYNC_IGNORED</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptDefault_Text">progressMessages</span>.<span class="ActionScriptDefault_Text">addItemAt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;LU ignores Call Out Of Sync&quot;</span>, 0<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptComment">// we choose to throw Error
</span>                    <span class="ActionScriptReserved">throw</span> <span class="ActionScriptDefault_Text">Error</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;LU reports Call Out Of Sync; please debug&quot;</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">break</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptASDoc">/**
         *  This could be a Command.
         */</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createSingleAssetsLoadEnv</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">loadupMon</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">LoadupMonitorProxy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">LoadupMonitorProxy</span><span class="ActionScriptBracket/Brace">(</span>
                <span class="ActionScriptDefault_Text">ApplicationFacade</span>.<span class="ActionScriptDefault_Text">SINGLE_ASSETS_LU_PROXY_NAME</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">facade</span>.<span class="ActionScriptDefault_Text">registerProxy</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">loadupMon</span> <span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptComment">// maxRetries 2, retryInterval 10 secs, timeout 300 secs
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">retryParams</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">RetryParameters</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">RetryParameters</span><span class="ActionScriptBracket/Brace">(</span> 2, 10, 300 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">loadupMon</span>.<span class="ActionScriptDefault_Text">defaultRetryPolicy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">RetryPolicy</span><span class="ActionScriptBracket/Brace">(</span>
                <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">RetryParameters</span><span class="ActionScriptBracket/Brace">(</span> 2, 10, 300 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptDefault_Text">loadupMon</span>.<span class="ActionScriptDefault_Text">keepResourceListOpen</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">loadupMon</span>.<span class="ActionScriptDefault_Text">loadResources</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptComment">// now loadupMon will wait for the first resource to be added
</span>
            <span class="ActionScriptDefault_Text">facade</span>.<span class="ActionScriptDefault_Text">registerCommand</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">Loadup</span>.<span class="ActionScriptDefault_Text">ASSET_LOADED</span>, <span class="ActionScriptDefault_Text">LoadupResourceLoadedCommand</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">facade</span>.<span class="ActionScriptDefault_Text">registerCommand</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">Loadup</span>.<span class="ActionScriptDefault_Text">ASSET_LOAD_FAILED</span>, <span class="ActionScriptDefault_Text">LoadupResourceFailedCommand</span> <span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">assetTypeMap</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">IAssetTypeMap</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">FlexAssetTypeMap</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">assetLoaderFactory</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">IAssetLoaderFactory</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">AssetLoaderFactory</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">assetTypeMap</span> <span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">groupPx</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">AssetGroupProxy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">AssetGroupProxy</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">assetLoaderFactory</span>,
                <span class="ActionScriptDefault_Text">ApplicationFacade</span>.<span class="ActionScriptDefault_Text">SINGLE_ASSETS_GROUP_PROXY_NAME</span>, <span class="ActionScriptDefault_Text">loadupMon</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">facade</span>.<span class="ActionScriptDefault_Text">registerProxy</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">groupPx</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptASDoc">/**
         *  This could be a Command.
         */</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">loadSingleAsset</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">loadupMon</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">LoadupMonitorProxy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">facade</span>.<span class="ActionScriptDefault_Text">retrieveProxy</span><span class="ActionScriptBracket/Brace">(</span> 
                <span class="ActionScriptDefault_Text">ApplicationFacade</span>.<span class="ActionScriptDefault_Text">SINGLE_ASSETS_LU_PROXY_NAME</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">LoadupMonitorProxy</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">groupPx</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">AssetGroupProxy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">facade</span>.<span class="ActionScriptDefault_Text">retrieveProxy</span><span class="ActionScriptBracket/Brace">(</span>
                <span class="ActionScriptDefault_Text">ApplicationFacade</span>.<span class="ActionScriptDefault_Text">SINGLE_ASSETS_GROUP_PROXY_NAME</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">AssetGroupProxy</span>;

            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">facade</span>.<span class="ActionScriptDefault_Text">hasProxy</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptBracket/Brace">))</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">sendNotification</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">Loadup</span>.<span class="ActionScriptDefault_Text">URL_REFUSED_PROXY_NAME_ALREADY_EXISTS</span>, <span class="ActionScriptDefault_Text">url</span>, 
                    <span class="ActionScriptDefault_Text">loadupMon</span>.<span class="ActionScriptDefault_Text">getProxyName</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">assetTypeMap</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">IAssetTypeMap</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">FlexAssetTypeMap</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">assetFactory</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">IAssetFactory</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">AssetFactory</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">assetTypeMap</span> <span class="ActionScriptBracket/Brace">)</span>;

                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">asset</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">IAsset</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">assetFactory</span>.<span class="ActionScriptDefault_Text">getAsset</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">px</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">IProxy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">AssetProxy</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">groupPx</span>, <span class="ActionScriptDefault_Text">url</span>, <span class="ActionScriptDefault_Text">asset</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">facade</span>.<span class="ActionScriptDefault_Text">registerProxy</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">px</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">groupPx</span>.<span class="ActionScriptDefault_Text">addAssetProxy</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">px</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">loadupMon</span>.<span class="ActionScriptDefault_Text">addResourceViaLoadupProxy</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">px</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ILoadupProxy</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptComment">// now loadupMon can ask the asset proxy to load this asset.
</span>            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptASDoc">/**
         *  This could be a Command.
         */</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">closeSingleAssetsLoadEnv</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">luMon</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">LoadupMonitorProxy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">facade</span>.<span class="ActionScriptDefault_Text">removeProxy</span><span class="ActionScriptBracket/Brace">(</span> 
                <span class="ActionScriptDefault_Text">ApplicationFacade</span>.<span class="ActionScriptDefault_Text">SINGLE_ASSETS_LU_PROXY_NAME</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">LoadupMonitorProxy</span>;
            <span class="ActionScriptDefault_Text">luMon</span>.<span class="ActionScriptDefault_Text">closeResourceList</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptASDoc">/**
         *  This could be a Command.
         */</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">removeSingleAssetsLoadEnv</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">luMon</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">LoadupMonitorProxy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">facade</span>.<span class="ActionScriptDefault_Text">removeProxy</span><span class="ActionScriptBracket/Brace">(</span> 
                <span class="ActionScriptDefault_Text">ApplicationFacade</span>.<span class="ActionScriptDefault_Text">SINGLE_ASSETS_LU_PROXY_NAME</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">LoadupMonitorProxy</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">luMon</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">luMon</span>.<span class="ActionScriptDefault_Text">cleanup</span><span class="ActionScriptBracket/Brace">()</span>;

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">groupPx</span> <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">AssetGroupProxy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">facade</span>.<span class="ActionScriptDefault_Text">retrieveProxy</span><span class="ActionScriptBracket/Brace">(</span>
                <span class="ActionScriptDefault_Text">ApplicationFacade</span>.<span class="ActionScriptDefault_Text">SINGLE_ASSETS_GROUP_PROXY_NAME</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">AssetGroupProxy</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">groupPx</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">groupPx</span>.<span class="ActionScriptDefault_Text">cleanupAfterLoading</span><span class="ActionScriptBracket/Brace">()</span>;

            <span class="ActionScriptComment">// And remove asset group proxy and asset proxies, if desired;
</span>            <span class="ActionScriptComment">// you would not do this if you want to retain the asset group and assets
</span>            <span class="ActionScriptComment">// for further read-only use.
</span>            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">groupPx</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">groupPx</span>.<span class="ActionScriptDefault_Text">cleanup</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span></pre></body>
</html>
